{"version":3,"sources":["Components/App/App.js","index.js"],"names":["App","useState","token","setToken","imgUrls","setImgUrls","useEffect","window","location","hash","substring","split","fetch","method","headers","Authorization","then","res","json","data","myFavArtistsImgUrls","items","forEach","artist","push","images","url","catch","err","console","error","className","href","process","join","onClick","shuffledImgUrls","i","length","j","Math","floor","random","map","imgUrl","src","ReactDOM","render","document","getElementById"],"mappings":"iPAgGeA,G,MA7FH,WACV,IADgB,EAQUC,mBAAS,MARnB,mBAQTC,EARS,KAQFC,EARE,OAScF,mBAAS,IATvB,mBASTG,EATS,KASAC,EATA,KAsDhB,OA3CAC,qBAAU,WACR,GAAIC,OAAOC,SAASC,KAAM,CAExB,IACIP,EADOK,OAAOC,SAASC,KAAKC,UAAU,GAAGC,MAAM,KAClC,GAAGA,MAAM,KAAK,GAC3BT,IAEFC,EAASD,GACTU,MACE,0EACA,CACEC,OAAQ,MACRC,QAAS,CACPC,cAAe,UAAYb,KAI9Bc,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MAAK,SAACG,GACL,IAAIC,EAAsB,GAC1BD,EAAKE,MAAMC,SAAQ,SAACC,GAClBH,EAAoBI,KAAKD,EAAOE,OAAO,GAAGC,QAE5CrB,EAAWe,MAEZO,OAAM,SAACC,GAAD,OAASC,QAAQC,MAAMF,OAElCrB,OAAOC,SAASC,KAAO,MAExB,IAeD,yBAAKsB,UAAU,QACX7B,GACA,0BAAM6B,UAAU,mBACd,iGAGA,uBACEA,UAAU,cACVC,KAAI,UA9DF,yCA8DE,sBACFC,mCADE,yBA1DRA,gDA0DQ,kBAzDC,CAAC,iBA2DuCC,KAC3C,OAHE,0CAFN,uBAYHhC,GACC,0BAAM6B,UAAU,wBACd,gCACE,4BAAQA,UAAU,cAAcI,QAlC1C,WAEE,IADA,IAAIC,EAAe,YAAOhC,GACjBiC,EAAID,EAAgBE,OAAS,EAAGD,EAAI,EAAGA,IAAK,CACnD,IAAME,EAAIC,KAAKC,MAAMD,KAAKE,UAAYL,EAAI,IADS,EAER,CACzCD,EAAgBG,GAChBH,EAAgBC,IAFjBD,EAAgBC,GAFkC,KAE9BD,EAAgBG,GAFc,KAOrDlC,EAAW+B,KAyBH,YAIF,yBAAKL,UAAU,qBACZ3B,EAAQuC,KAAI,SAACC,GAAD,OACX,yBAAKb,UAAU,oBACb,yBAAKc,IAAKD,aCjF1BE,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.95d01a15.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\n\nconst App = () => {\n  const api = \"https://accounts.spotify.com/authorize\";\n  const redirectUri =\n    process.env.NODE_ENV !== \"production\"\n      ? \"http://localhost:3000/redirect\"\n      : process.env.REACT_APP_REDIRECT_URI;\n  const scopes = [\"user-top-read\"];\n\n  const [token, setToken] = useState(null);\n  const [imgUrls, setImgUrls] = useState([]);\n\n  useEffect(() => {\n    if (window.location.hash) {\n      // After spotify authorization get hash from response\n      let hash = window.location.hash.substring(1).split(\"&\");\n      let token = hash[0].split(\"=\")[1];\n      if (token) {\n        // Set the token and fetch data\n        setToken(token);\n        fetch(\n          \"https://api.spotify.com/v1/me/top/artists?limit=50&time_range=long_term\",\n          {\n            method: \"GET\",\n            headers: {\n              Authorization: \"Bearer \" + token,\n            },\n          }\n        )\n          .then((res) => res.json())\n          .then((data) => {\n            let myFavArtistsImgUrls = [];\n            data.items.forEach((artist) => {\n              myFavArtistsImgUrls.push(artist.images[0].url);\n            });\n            setImgUrls(myFavArtistsImgUrls);\n          })\n          .catch((err) => console.error(err));\n      }\n      window.location.hash = \"\";\n    }\n  }, []);\n\n  function shuffleImgUrls() {\n    let shuffledImgUrls = [...imgUrls];\n    for (let i = shuffledImgUrls.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [shuffledImgUrls[i], shuffledImgUrls[j]] = [\n        shuffledImgUrls[j],\n        shuffledImgUrls[i],\n      ];\n    }\n    setImgUrls(shuffledImgUrls);\n  }\n\n  return (\n    <div className=\"app\">\n      {!token && (\n        <main className=\"login-container\">\n          <p>\n            Make a barcode collage of your favourite artists, because why not.\n          </p>\n          <a\n            className=\"spotify-btn\"\n            href={`${api}?client_id=${\n              process.env.REACT_APP_CLIENT_ID\n            }&redirect_uri=${redirectUri}&scope=${scopes.join(\n              \"%20\"\n            )}&response_type=token&show_dialog=true`}\n          >\n            Login With Spotify\n          </a>\n        </main>\n      )}\n      {token && (\n        <main className=\"authorized-container\">\n          <header>\n            <button className=\"spotify-btn\" onClick={shuffleImgUrls}>\n              Reorder\n            </button>\n          </header>\n          <div className=\"collage-container\">\n            {imgUrls.map((imgUrl) => (\n              <div className=\"artist-container\">\n                <img src={imgUrl} />\n              </div>\n            ))}\n          </div>\n        </main>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./Components/App/App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}